{"openapi":"3.1.0","info":{"title":"FastAPI","version":"0.1.0"},"paths":{"/":{"get":{"summary":"Root","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object","title":"Response Root  Get"}}}}}}},"/chat":{"get":{"summary":"Chat","operationId":"chat_chat_get","parameters":[{"name":"user_message","in":"query","required":true,"schema":{"type":"string","title":"User Message"}},{"name":"conversation_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Conversation Id"}}],"responses":{"200":{"description":"Server-Sent Events stream containing chat progress updates and final answer.","content":{"text/event-stream":{"schema":{"anyOf":[{"$ref":"#/components/schemas/ChatStreamEnvelope"},{"$ref":"#/components/schemas/ChatErrorEnvelope"},{"$ref":"#/components/schemas/ChatDoneEnvelope"}]},"examples":{"turn_start":{"summary":"Turn metadata","value":{"event":"message","data":{"type":"turn.start","conversation_id":"example-conversation-id"}}},"answer_chunk":{"summary":"Answer delta chunk","value":{"event":"message","data":{"type":"answer-delta","delta":"Manchester City won the 2023 UEFA Champions League."}}},"stream_completed":{"summary":"Stream completed","value":{"event":"end","data":{"message":"[DONE]"}}},"stream_error":{"summary":"Stream error","value":{"event":"error","data":{"error":"Upstream request failed"}}}}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"AnswerMessage":{"additionalProperties":false,"properties":{"type":{"const":"answer","title":"Type","type":"string"},"answer":{"title":"Answer","type":"string"},"citations":{"anyOf":[{"items":{"$ref":"#/components/schemas/Page"},"type":"array"},{"type":"null"}],"default":null,"title":"Citations"}},"required":["type","answer"],"title":"AnswerMessage","type":"object"},"ChatDoneEnvelope":{"description":"Server-sent event dispatched when streaming is finished.","properties":{"event":{"const":"end","title":"Event","type":"string"},"data":{"$ref":"#/components/schemas/ChatDonePayload"}},"required":["event","data"],"title":"ChatDoneEnvelope","type":"object"},"ChatDonePayload":{"description":"Payload emitted when the stream has completed successfully.","properties":{"message":{"const":"[DONE]","title":"Message","type":"string"}},"required":["message"],"title":"ChatDonePayload","type":"object"},"ChatErrorEnvelope":{"description":"Server-sent event dispatched when an unrecoverable error occurs.","properties":{"event":{"const":"error","title":"Event","type":"string"},"data":{"$ref":"#/components/schemas/ChatErrorPayload"}},"required":["event","data"],"title":"ChatErrorEnvelope","type":"object"},"ChatErrorPayload":{"description":"Error payload sent when the stream encounters an exception.","properties":{"error":{"title":"Error","type":"string"}},"required":["error"],"title":"ChatErrorPayload","type":"object"},"ChatStreamEnvelope":{"description":"Primary chat event wrapping a streamed message payload.","properties":{"event":{"const":"message","title":"Event","type":"string"},"data":{"anyOf":[{"$ref":"#/components/schemas/TurnStartMessage"},{"$ref":"#/components/schemas/StepStartMessage"},{"$ref":"#/components/schemas/StepEndMessage"},{"$ref":"#/components/schemas/StepFetchStartMessage"},{"$ref":"#/components/schemas/StepFetchEndMessage"},{"$ref":"#/components/schemas/StepAnswerStartMessage"},{"$ref":"#/components/schemas/StepAnswerDeltaMessage"},{"$ref":"#/components/schemas/StepAnswerEndMessage"},{"$ref":"#/components/schemas/AnswerMessage"}],"title":"Data"}},"required":["event","data"],"title":"ChatStreamEnvelope","type":"object"},"Page":{"description":"Normalized representation of a fetched page.","properties":{"url":{"title":"Url","type":"string"},"title":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Title"},"snippet":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Snippet"},"favicon":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Favicon"}},"required":["url"],"title":"Page","type":"object"},"StepAnswerDeltaMessage":{"additionalProperties":false,"properties":{"type":{"const":"step.answer.delta","title":"Type","type":"string"},"title":{"title":"Title","type":"string"},"delta":{"title":"Delta","type":"string"}},"required":["type","title","delta"],"title":"StepAnswerDeltaMessage","type":"object"},"StepAnswerEndMessage":{"additionalProperties":false,"properties":{"type":{"const":"step.answer.end","title":"Type","type":"string"},"title":{"title":"Title","type":"string"}},"required":["type","title"],"title":"StepAnswerEndMessage","type":"object"},"StepAnswerStartMessage":{"additionalProperties":false,"properties":{"type":{"const":"step.answer.start","title":"Type","type":"string"},"title":{"title":"Title","type":"string"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Description"}},"required":["type","title"],"title":"StepAnswerStartMessage","type":"object"},"StepEndMessage":{"additionalProperties":false,"properties":{"type":{"const":"step.end","title":"Type","type":"string"},"title":{"title":"Title","type":"string"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Description"}},"required":["type","title"],"title":"StepEndMessage","type":"object"},"StepFetchEndMessage":{"additionalProperties":false,"properties":{"type":{"const":"step.fetch.end","title":"Type","type":"string"},"title":{"title":"Title","type":"string"},"pages":{"items":{"$ref":"#/components/schemas/Page"},"title":"Pages","type":"array"}},"required":["type","title","pages"],"title":"StepFetchEndMessage","type":"object"},"StepFetchStartMessage":{"additionalProperties":false,"properties":{"type":{"const":"step.fetch.start","title":"Type","type":"string"},"title":{"title":"Title","type":"string"},"pages":{"items":{"$ref":"#/components/schemas/Page"},"title":"Pages","type":"array"}},"required":["type","title","pages"],"title":"StepFetchStartMessage","type":"object"},"StepStartMessage":{"additionalProperties":false,"properties":{"type":{"const":"step.start","title":"Type","type":"string"},"title":{"title":"Title","type":"string"},"description":{"title":"Description","type":"string"}},"required":["type","title","description"],"title":"StepStartMessage","type":"object"},"TurnStartMessage":{"additionalProperties":false,"properties":{"type":{"const":"turn.start","title":"Type","type":"string"},"conversation_id":{"title":"Conversation Id","type":"string"}},"required":["type","conversation_id"],"title":"TurnStartMessage","type":"object"}}}}