{"openapi":"3.1.0","info":{"title":"FastAPI","version":"0.1.0"},"paths":{"/":{"get":{"summary":"Root","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object","title":"Response Root  Get"}}}}}}},"/chat":{"get":{"summary":"Chat","operationId":"chat_chat_get","parameters":[{"name":"user_message","in":"query","required":true,"schema":{"type":"string","title":"User Message"}},{"name":"conversation_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Conversation Id"}}],"responses":{"200":{"description":"Server-Sent Events stream containing chat progress updates and final answer.","content":{"text/event-stream":{"schema":{"anyOf":[{"$ref":"#/components/schemas/ChatStreamEnvelope"},{"$ref":"#/components/schemas/ChatErrorEnvelope"},{"$ref":"#/components/schemas/ChatDoneEnvelope"}]},"examples":{"turn_start":{"summary":"Turn metadata","value":{"event":"message","data":{"type":"turn.start","conversation_id":"example-conversation-id"}}},"answer_chunk":{"summary":"Answer delta chunk","value":{"event":"message","data":{"type":"answer-delta","delta":"Manchester City won the 2023 UEFA Champions League."}}},"stream_completed":{"summary":"Stream completed","value":{"event":"end","data":{"message":"[DONE]"}}},"stream_error":{"summary":"Stream error","value":{"event":"error","data":{"error":"Upstream request failed"}}}}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"AnswerDeltaMessage":{"additionalProperties":false,"properties":{"type":{"const":"answer-delta","title":"Type","type":"string"},"delta":{"title":"Delta","type":"string"}},"required":["type","delta"],"title":"AnswerDeltaMessage","type":"object"},"AnswerMessage":{"additionalProperties":false,"properties":{"type":{"const":"answer","title":"Type","type":"string"},"answer":{"title":"Answer","type":"string"},"citations":{"anyOf":[{"items":{"$ref":"#/components/schemas/Page"},"type":"array"},{"type":"null"}],"default":null,"title":"Citations"}},"required":["type","answer"],"title":"AnswerMessage","type":"object"},"ChatDoneEnvelope":{"description":"Server-sent event dispatched when streaming is finished.","properties":{"event":{"const":"end","title":"Event","type":"string"},"data":{"$ref":"#/components/schemas/ChatDonePayload"}},"required":["event","data"],"title":"ChatDoneEnvelope","type":"object"},"ChatDonePayload":{"description":"Payload emitted when the stream has completed successfully.","properties":{"message":{"const":"[DONE]","title":"Message","type":"string"}},"required":["message"],"title":"ChatDonePayload","type":"object"},"ChatErrorEnvelope":{"description":"Server-sent event dispatched when an unrecoverable error occurs.","properties":{"event":{"const":"error","title":"Event","type":"string"},"data":{"$ref":"#/components/schemas/ChatErrorPayload"}},"required":["event","data"],"title":"ChatErrorEnvelope","type":"object"},"ChatErrorPayload":{"description":"Error payload sent when the stream encounters an exception.","properties":{"error":{"title":"Error","type":"string"}},"required":["error"],"title":"ChatErrorPayload","type":"object"},"ChatStreamEnvelope":{"description":"Primary chat event wrapping a streamed message payload.","properties":{"event":{"const":"message","title":"Event","type":"string"},"data":{"anyOf":[{"$ref":"#/components/schemas/TurnStartMessage"},{"$ref":"#/components/schemas/TurnStatusMessage"},{"$ref":"#/components/schemas/SearchStartMessage"},{"$ref":"#/components/schemas/SearchEndMessage"},{"$ref":"#/components/schemas/RankStartMessage"},{"$ref":"#/components/schemas/RankEndMessage"},{"$ref":"#/components/schemas/FetchStartMessage"},{"$ref":"#/components/schemas/FetchEndMessage"},{"$ref":"#/components/schemas/AnswerDeltaMessage"},{"$ref":"#/components/schemas/AnswerMessage"}],"title":"Data"}},"required":["event","data"],"title":"ChatStreamEnvelope","type":"object"},"FetchEndMessage":{"additionalProperties":false,"properties":{"type":{"const":"fetch.end","title":"Type","type":"string"},"pages":{"anyOf":[{"items":{"$ref":"#/components/schemas/Page"},"type":"array"},{"type":"null"}],"default":null,"title":"Pages"}},"required":["type"],"title":"FetchEndMessage","type":"object"},"FetchStartMessage":{"additionalProperties":false,"properties":{"type":{"const":"fetch.start","title":"Type","type":"string"},"pages":{"items":{"$ref":"#/components/schemas/Page"},"title":"Pages","type":"array"}},"required":["type","pages"],"title":"FetchStartMessage","type":"object"},"Page":{"description":"Normalized representation of a fetched page.","properties":{"url":{"title":"Url","type":"string"},"title":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Title"},"snippet":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Snippet"},"favicon":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Favicon"}},"required":["url"],"title":"Page","type":"object"},"RankEndMessage":{"additionalProperties":false,"properties":{"type":{"const":"rank.end","title":"Type","type":"string"},"pages":{"items":{"$ref":"#/components/schemas/Page"},"title":"Pages","type":"array"}},"required":["type","pages"],"title":"RankEndMessage","type":"object"},"RankStartMessage":{"additionalProperties":false,"properties":{"type":{"const":"rank.start","title":"Type","type":"string"}},"required":["type"],"title":"RankStartMessage","type":"object"},"SearchEndMessage":{"additionalProperties":false,"properties":{"type":{"const":"search.end","title":"Type","type":"string"},"query":{"title":"Query","type":"string"},"results":{"title":"Results","type":"integer"}},"required":["type","query","results"],"title":"SearchEndMessage","type":"object"},"SearchStartMessage":{"additionalProperties":false,"properties":{"type":{"const":"search.start","title":"Type","type":"string"},"query":{"title":"Query","type":"string"}},"required":["type","query"],"title":"SearchStartMessage","type":"object"},"TurnStartMessage":{"additionalProperties":false,"properties":{"type":{"const":"turn.start","title":"Type","type":"string"},"conversation_id":{"title":"Conversation Id","type":"string"}},"required":["type","conversation_id"],"title":"TurnStartMessage","type":"object"},"TurnStatusMessage":{"additionalProperties":false,"properties":{"type":{"const":"turn.status","title":"Type","type":"string"},"title":{"title":"Title","type":"string"},"description":{"title":"Description","type":"string"}},"required":["type","title","description"],"title":"TurnStatusMessage","type":"object"}}}}